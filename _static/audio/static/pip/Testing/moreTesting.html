<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Test Cases Revisited &mdash; Programs, Information, and People: Interactive Edition</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/poll.css" type="text/css" />
    <link rel="stylesheet" href="../_static/video.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pytutor.css" type="text/css" />
    <link rel="stylesheet" href="../_static/modal-basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="../_static/activecode.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tabbedstuff.css" type="text/css" />
    <link rel="stylesheet" href="../_static/parsons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/lib/prettify.css" type="text/css" />
    <link rel="stylesheet" href="../_static/jquery-ui-1.10.3.custom.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="../../runestone-custom-sphinx-bootstrap.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/poll.js"></script>
    <script type="text/javascript" src="../_static/d3.v2.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.jsPlumb-1.3.10-all-min.js"></script>
    <script type="text/javascript" src="../_static/pytutor.js"></script>
    <script type="text/javascript" src="../_static/jquery.highlight.js"></script>
    <script type="text/javascript" src="../_static/bookfuncs.js"></script>
    <script type="text/javascript" src="../_static/codemirror.js"></script>
    <script type="text/javascript" src="../_static/xml.js"></script>
    <script type="text/javascript" src="../_static/css.js"></script>
    <script type="text/javascript" src="../_static/htmlmixed.js"></script>
    <script type="text/javascript" src="../_static/python.js"></script>
    <script type="text/javascript" src="../_static/javascript.js"></script>
    <script type="text/javascript" src="../_static/activecode.js"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="../_static/assess.js"></script>
    <script type="text/javascript" src="../_static/animationbase.js"></script>
    <script type="text/javascript" src="../_static/lib/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/lib/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../_static/lib/prettify.js"></script>
    <script type="text/javascript" src="../_static/lib/underscore-min.js"></script>
    <script type="text/javascript" src="../_static/lib/lis.js"></script>
    <script type="text/javascript" src="../_static/parsons.js"></script>
    <script type="text/javascript" src="../_static/parsons-noconflict.js"></script>
    <script type="text/javascript" src="../_static/bookfuncs.js"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="../_static/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="../_static/waypoints.min.js"></script>
    <script type="text/javascript" src="../_static/rangy-core.js"></script>
    <script type="text/javascript" src="../_static/rangy-textrange.js"></script>
    <script type="text/javascript" src="../_static/rangy-cssclassapplier.js"></script>
    <script type="text/javascript" src="../_static/user-highlights.js"></script>
    <script type="text/javascript" src="../_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="../_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="../_static/jquery-migrate-1.2.1.min.js"></script>
    <link rel="top" title="Programs, Information, and People: Interactive Edition" href="../index.html" />
    <link rel="next" title="Copyright Notice" href="../FrontBackMatter/copyright.html" />
    <link rel="prev" title="Sorting Lists of Instances" href="../Sort/sorting_instances.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://127.0.0.1:8000' ? 'http://127.0.0.1:8000' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'pip';
  eBookConfig.logLevel = 10;
  eBookConfig.loginRequired = false
  eBookConfig.build_info = "3.1.1";
  eBookConfig.isLoggedIn = false;
</script>

<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>


<script>
var _prum = [['id', '521dfcc4abe53d0749000000'],
             ['mark', 'firstbyte', (new Date()).getTime()]];
(function() {
    var s = document.getElementsByTagName('script')[0]
      , p = document.createElement('script');
    p.async = 'async';
    p.src = '//rum-static.pingdom.net/prum.min.js';
    s.parentNode.insertBefore(p, s);
})();
</script>



  </head>
  <body role="document">


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        <a class="brand-logo" style='background: transparent url("../_static/img/logo_small.png") no-repeat 0px 0px;' href="/runestone/default/user/login">&nbsp; </a>
        <a class="navbar-brand" href="../toc.html">Programs, Information, and People</a>
      </div>
    </div>

    <div class="navbar-collapse collapse navbar-ex1-collapse">

      <ul class="nav navbar-nav navbar-right">

        <li class="divider-vertical"></li>

        <!-- social media dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-share-alt" style="opacity: 0.9"></i>
          </a>
          <ul class="dropdown-menu social-menu">
              <li>
                <div>
                  <b>Runestone in social media:</b>
                </div>
                <a href="https://twitter.com/iRunestone" class="twitter-follow-button" data-show-count="true">Follow @iRunestone</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                <div class="fb-like" data-href="https://www.facebook.com/RunestoneInteractive" data-send="false" data-layout="button_count" data-width="300" data-show-faces="false" data-font="arial"></div>
              </li>

              <li class="divider"></li>
              <li>
                <div>
                  <b>Help support us:</b>
                </div>
                <div class="gittip">
                  <iframe style="border:0;"
                    src="https://www.gittip.com/bnmnetp/widget.html"
                    width="48pt" height="22pt" class="gittip-button">
                  </iframe>
                </div>
              </li>
          </ul>
        </li>
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../toc.html'>Table of Contents</a></li>
            
            <li><a href='/runestone/static/pip/genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li id="scratch_ac_link"><a href="javascript:toggleScratchActivecode()">Scratch ActiveCode</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        <!-- user account dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-user" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><span class='loggedinuser'></span></li>
            <li class="divider"></li>
            <li><a href='http://127.0.0.1:8000/runestone/admin/index'>Instructor's Page</a></li>
            <li class="divider"></li>
            <li><a href="http://127.0.0.1:8000/runestone/assignments" id="registerlink">Project Page</a></li>
            <li><a href="http://127.0.0.1:8000/runestone/default/user/register" id="registerlink">Register</a></li>
            <li class='loginout'><a href='#'>Login</a></li> <!-- correct link populated by addNavbarLoginLink() -->
          </ul>
        </li>
        <!-- end user account dropdown -->

        <li class="divider-vertical"></li>

        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href='/runestone/static/pip/navhelp.html'>Navigation Help</a></li>
            <li><a href='/runestone/static/overview/instructor.html'>Help for Instructors</a></li>            
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>About Runestone</a></li>
            <li><a href='https://github.com/bnmnetp/runestone/issues/new'>Report A Problem</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>

      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Test Cases Revisited</a></li>
<li><a class="reference internal" href="#writing-test-cases">Writing Test Cases</a><ul>
<li><a class="reference internal" href="#testing-functions">Testing functions</a></li>
<li><a class="reference internal" href="#testing-classes">Testing classes</a></li>
<li><a class="reference internal" href="#glossary">Glossary</a></li>
</ul>
</li>
</ul>
</ul>
</li>
          <li class="divider-vertical"></li>
        
        
          
  <li id="relations-prev" title="Previous Chapter - Sorting Lists of Instances" data-toggle="tooltip">
    <a href="../Sort/sorting_instances.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - Copyright Notice' data-toggle="tooltip" >
    <a href="../FrontBackMatter/copyright.html" >
      <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        
        
          <li></li>
        
      </ul>

    </div>
  </div>
</div>


<div class="container">
  
  <div class="section" id="test-cases-revisited">
<span id="more-testing-chap"></span><h1>Test Cases Revisited<a class="headerlink" href="#test-cases-revisited" title="Permalink to this headline">¶</a></h1>
<p>Previously, you were introduced to the idea of test cases. Take a few minutes to <a class="reference internal" href="simpleTest.html#simple-tests-chap"><em>review that chapter</em></a> if you don&#8217;t remember it.</p>
<p>Python provides a unit testing framework. It makes it easy to keep track of all your tests and to run them all whenever you make changes to your code, to make
sure that new code you&#8217;ve written hasn&#8217;t made any of the tests fail that previously passed. We are not going to learn to use that framework. It&#8217;s overkill for the learning objectives of this couse, which are just trying to introduce you to the main idea of unit testing.</p>
<p>Instead, we have provided a modified version of the simple testing module that you have previously imported. Its full code is shown below and it has been distributed in the inclass/ folder. In this chapter, we will use it to dicuss how to write good test cases.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">def</span> <span class="nf">testEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">feedback</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">i</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">print</span> <span class="s">&quot;--&quot;</span><span class="p">,</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">type</span><span class="p">(</span><span class="n">actual</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;Failed test </span><span class="si">%d</span><span class="s">: </span><span class="si">%s</span><span class="se">\n\t</span><span class="s">type of expected and actual don&#39;t match&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">feedback</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
        <span class="c"># they&#39;re integers, so check if exactly the same</span>
        <span class="k">if</span> <span class="n">actual</span> <span class="o">==</span> <span class="n">expected</span><span class="p">:</span>
            <span class="k">print</span><span class="s">&#39;Pass test </span><span class="si">%d</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span>  <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">feedback</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="mf">1.11</span><span class="p">):</span>
        <span class="c"># a float is expected, so just check if it&#39;s very close, to allow for</span>
        <span class="c"># rounding errors</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">actual</span><span class="o">-</span><span class="n">expected</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.00001</span><span class="p">:</span>
            <span class="k">print</span><span class="s">&#39;Pass test </span><span class="si">%d</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span>  <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">feedback</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">([]):</span>
        <span class="k">if</span> <span class="nb">len</span> <span class="p">(</span><span class="n">expected</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actual</span><span class="p">):</span>
            <span class="k">print</span> <span class="s">&quot;Failed test </span><span class="si">%d</span><span class="s">: </span><span class="si">%s</span><span class="se">\n\t</span><span class="s">Lengths don&#39;t match&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">feedback</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">print</span> <span class="s">&quot;Failed test </span><span class="si">%d</span><span class="s">: </span><span class="si">%s</span><span class="se">\n\t</span><span class="s">items in expected and actual do not match&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">feedback</span><span class="p">)</span>
                    <span class="k">return</span> <span class="bp">False</span>
            <span class="k">print</span><span class="s">&#39;Pass test </span><span class="si">%d</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span>  <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">feedback</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c"># check if they are equal</span>
        <span class="k">if</span> <span class="n">actual</span> <span class="o">==</span> <span class="n">expected</span><span class="p">:</span>
            <span class="k">print</span><span class="s">&#39;Pass test </span><span class="si">%d</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span>  <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">feedback</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">print</span> <span class="s">&#39;Failed test </span><span class="si">%d</span><span class="s">: </span><span class="si">%s</span><span class="se">\n\t</span><span class="s">expected:</span><span class="se">\t</span><span class="si">%s</span><span class="se">\n\t</span><span class="s">got:</span><span class="se">\t\t</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">feedback</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">False</span>

<span class="k">def</span> <span class="nf">testType</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">typeName</span><span class="p">,</span> <span class="n">feedback</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">i</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">print</span> <span class="s">&quot;--&quot;</span><span class="p">,</span>
    <span class="n">types</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;string&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">),</span>
             <span class="s">&quot;dictionary&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">({}),</span>
             <span class="s">&quot;list&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">([]),</span>
             <span class="s">&quot;int&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
             <span class="s">&quot;float&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="mf">1.0</span><span class="p">),</span>
             <span class="s">&quot;None&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span>
             <span class="s">&quot;function&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span>
             <span class="p">}</span>
    <span class="k">if</span> <span class="n">typeName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">types</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;Failed test </span><span class="si">%d</span><span class="s">: </span><span class="si">%s</span><span class="se">\n\t</span><span class="s">unknown typeName </span><span class="si">%s</span><span class="s"> specified.</span><span class="se">\n\t</span><span class="s">Should be one of </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">feedback</span><span class="p">,</span> <span class="n">typeName</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="n">types</span><span class="p">[</span><span class="n">typeName</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span><span class="p">:</span>
        <span class="k">print</span><span class="s">&#39;Pass test </span><span class="si">%d</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span>  <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">feedback</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;Failed test </span><span class="si">%d</span><span class="s">: </span><span class="si">%s</span><span class="se">\n\t</span><span class="s">expected type </span><span class="si">%s</span><span class="se">\n\t</span><span class="s">got </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">feedback</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">actual</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">False</span>
</pre></div>
</div>
<p>Compared to the original version of the test module, the key changes are:</p>
<ul class="simple">
<li>The pass or fail messages are labeled with an index i, so you keep track of which tests are passing and failing. The first test that is run is automatically labeled 1, the second 2, and so on.</li>
<li>To further aid you in finding which test is failing, in addition to the automatically generated number, a text string named <tt class="docutils literal"><span class="pre">feedback</span></tt> is also printed out. This is an optional parameter that is specified when the test function is invoked.</li>
<li>A few improvements have been made in the testEqual function to give you better diagnostics about what&#8217;s wrong when the expected and actual values are not equal.</li>
<li>A new function is included, <tt class="docutils literal"><span class="pre">testType</span></tt>. It checks whether a value is of a specified type. The types are specified by a the parameter <tt class="docutils literal"><span class="pre">typeName</span></tt>, which takes one of the following values: &#8220;string&#8221;, &#8220;dictionary&#8221;, &#8220;list&#8221;, &#8220;int&#8221;, &#8220;float&#8221;, &#8220;None&#8221;, or &#8220;function&#8221;.</li>
</ul>
<p>The testType function isn&#8217;t really needed. Instead of calling <tt class="docutils literal"><span class="pre">test.testType(x,</span> <span class="pre">&quot;int&quot;)</span></tt>, you could get the same effect with <tt class="docutils literal"><span class="pre">test.testEqual(type(x),</span> <span class="pre">type(1))</span></tt>. The testType function is provided just because it&#8217;s a little clearer for a person reading  <tt class="docutils literal"><span class="pre">test.testType(x,</span> <span class="pre">&quot;int&quot;)</span></tt> to understand what it is doing.</p>
</div>
<div class="section" id="writing-test-cases">
<h1>Writing Test Cases<a class="headerlink" href="#writing-test-cases" title="Permalink to this headline">¶</a></h1>
<p>It is a good idea to write one or more test cases for each function, method, or class that you define. We will start with functions and then move on to classes.</p>
<div class="section" id="testing-functions">
<h2>Testing functions<a class="headerlink" href="#testing-functions" title="Permalink to this headline">¶</a></h2>
<p>A function defines an operation that can be performed. If the function takes one or more parameters, it is supposed to work properly on a variety of possible inputs. Each test case will check whether the function works properly on <strong>one set of possible inputs</strong>.</p>
<p>A useful function will do some combination of three things, given its input parameters:</p>
<ul class="simple">
<li>Return a value. For these, you will write <strong>return value tests</strong>.</li>
<li>Modify the contents of some mutable object, like a list or dictionary. For these you will write <strong>side effect tests</strong>.</li>
<li>Print something or write something to a file. Tests of whether a function generates the right printed output are beyond the scope of this testing framework; you won&#8217;t write these tests.</li>
</ul>
<p>Testing whether a function returns the correct value is the easiest test case to define. You simply check whether the result of invoking the function a particular input produces the particular output that you expect. If f is your function, and you think that it should transform inputs x and y into output z, then you could write a test as <tt class="docutils literal"><span class="pre">test.testEqual(f(x,</span> <span class="pre">y),</span> <span class="pre">z)</span></tt>. Or, to give a more concrete example, if you have a function <tt class="docutils literal"><span class="pre">sqaure</span></tt>, you could have a test case <tt class="docutils literal"><span class="pre">test.testEqual(square(3),</span> <span class="pre">9)</span></tt>. Call this a <strong>return value test</strong>.</p>
<p>To test whether a function makes correct changes to a mutable object, you will need more than one line of code. You will first set the mutable object to some value, then run the function, then check whether the object has the expected value. An example follows. Call this a <strong>side effect test</strong> because you are checking to see whether the function invocation has had the correct side effect on the mutable object.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">update_counts</span><span class="p">(</span><span class="n">letters</span><span class="p">,</span> <span class="n">counts_dict</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">letters</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">counts_dict</span><span class="p">:</span>
            <span class="n">counts_dict</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">counts_dict</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">counts_dict</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">counts_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">update_counts</span><span class="p">(</span><span class="s">&quot;aaab&quot;</span><span class="p">,</span> <span class="n">counts_dict</span><span class="p">)</span>
<span class="n">test</span><span class="o">.</span><span class="n">testEqual</span><span class="p">(</span><span class="n">counts_dict</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">],</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">test</span><span class="o">.</span><span class="n">testEqual</span><span class="p">(</span><span class="n">counts_dict</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Because each test checks whether a function works properly on specific inputs, the test cases will never be complete: in principle, a function might work properly on all the inputs that are tested in the test cases, but still not work properly on some other inputs. That&#8217;s where the art of defining test cases comes in: you try to find specific inputs that are representative of all the important kinds of inputs that might ever be passed to the function.</p>
<p>The first test case that you define for a function should be an &#8220;easy&#8221; case, one that is prototypical of the kinds of inputs the function is supposed to handle. Additional test cases should handle &#8220;extreme&#8221; or unusual inputs. For example, if you are defining the &#8220;square&#8221; function, the first, easy case, might be an input like 3. Additional extreme or unusual inputs around which you create tests cases might be a negative number, 0, a floating point number, and a very, very large number.</p>
</div>
<div class="section" id="testing-classes">
<h2>Testing classes<a class="headerlink" href="#testing-classes" title="Permalink to this headline">¶</a></h2>
<p>To test a user-defined class, you will create test cases that check whether instances are created propertly, and you will create test cases for each of the methods as functions, by invoking them on particular instances and seeing whether they produce the correct return values and side effects, especially side effects that change data stored in the instance variables. To illustrate, we will use the Point class that was used in the <a class="reference internal" href="../Classes/classesintro.html#classes-chap"><em>introduction to classes</em></a>.</p>
<p>To test whether the class constructor (the __init__) method is working correctly, create an instance and then ivoke test.testEqual to see whether its instance variables are set correctly.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Point</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Point class for representing and manipulating x,y coordinates. &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initX</span><span class="p">,</span> <span class="n">initY</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">initX</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">initY</span>

    <span class="k">def</span> <span class="nf">distanceFromOrigin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span> <span class="o">**</span> <span class="mf">0.5</span>

    <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">dx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">dy</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">test</span><span class="o">.</span><span class="n">testEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">test</span><span class="o">.</span><span class="n">testEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>A method like distanceFromOrigin does its work by computing a return value, so it needs to be tested with a return value test. A method like move does its work by changing the contents of a mutable object (the point instance has its instance variable changes) so it needs to be tested with a side effect test.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">test</span><span class="o">.</span><span class="n">testEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">distanceFromOrigin</span><span class="p">(),</span> <span class="mf">5.0</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">test</span><span class="o">.</span><span class="n">testEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">test</span><span class="o">.</span><span class="n">testEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Check your understanding</strong></p>

            <div id="test_questionmore_testing_1" class="alert alert-warning">
            interpolation-1: For each function, you should create exactly one test case.<form name="test_questionmore_testing_1_form" method="get" action="" onsubmit="return false;">
            <input type="radio" name="group1" value="a" id="test_questionmore_testing_1_opt_a" />
            <label for= "test_questionmore_testing_1_opt_a">  a) True</label><br />
            
            <input type="radio" name="group1" value="b" id="test_questionmore_testing_1_opt_b" />
            <label for= "test_questionmore_testing_1_opt_b">  b) False</label><br />
            

            <script>
            $(document).ready(function(){checkRadio('test_questionmore_testing_1');});
            </script>
            <button class='btn btn-success' name="do answer" onclick="checkMCMFStorage('test_questionmore_testing_1','b',['Each test case checks whether the function works correctly on one input. It\u0027s a good idea to check several different inputs, including some extreme cases.', 'It\u0027s a good idea to check some extreme cases, as well as the typical cases.'])">Check Me</button>
            <button class='btn btn-default' id="test_questionmore_testing_1_bcomp" disabled name="compare" onclick="compareAnswers('test_questionmore_testing_1');">Compare Me</button>
            </form><br />
            <div id="test_questionmore_testing_1_feedback">
            </div>
            </div>
            
            <div id="test_questionmore_testing_2" class="alert alert-warning">
            interpolation-2: To test a method that changes the value of an instance variable, which kind of test case should you write?<form name="test_questionmore_testing_2_form" method="get" action="" onsubmit="return false;">
            <input type="radio" name="group1" value="a" id="test_questionmore_testing_2_opt_a" />
            <label for= "test_questionmore_testing_2_opt_a">  a) return value test</label><br />
            
            <input type="radio" name="group1" value="b" id="test_questionmore_testing_2_opt_b" />
            <label for= "test_questionmore_testing_2_opt_b">  b) side effect test</label><br />
            

            <script>
            $(document).ready(function(){checkRadio('test_questionmore_testing_2');});
            </script>
            <button class='btn btn-success' name="do answer" onclick="checkMCMFStorage('test_questionmore_testing_2','b',['The method may return the correct value but not properly change the values of instance variables. See the move method of the Point class above.', 'The move method of the Point class above is a good example.'])">Check Me</button>
            <button class='btn btn-default' id="test_questionmore_testing_2_bcomp" disabled name="compare" onclick="compareAnswers('test_questionmore_testing_2');">Compare Me</button>
            </form><br />
            <div id="test_questionmore_testing_2_feedback">
            </div>
            </div>
            
            <div id="test_questionmore_testing_3" class="alert alert-warning">
            <p>interpolation-3: To test the function maxabs, which kind of test case should you write?</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">maxabs</span><span class="p">(</span><span class="n">L</span><span class="p">):</span>
   <span class="sd">&quot;&quot;&quot;L should be a list of numbers (ints or floats). The return value should be the maximum absolute value of the numbers in L.&quot;&quot;&quot;</span>
   <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">)</span>
</pre></div>
</div>
<form name="test_questionmore_testing_3_form" method="get" action="" onsubmit="return false;">
            <input type="radio" name="group1" value="a" id="test_questionmore_testing_3_opt_a" />
            <label for= "test_questionmore_testing_3_opt_a">  a) return value test</label><br />
            
            <input type="radio" name="group1" value="b" id="test_questionmore_testing_3_opt_b" />
            <label for= "test_questionmore_testing_3_opt_b">  b) side effect test</label><br />
            

            <script>
            $(document).ready(function(){checkRadio('test_questionmore_testing_3');});
            </script>
            <button class='btn btn-success' name="do answer" onclick="checkMCMFStorage('test_questionmore_testing_3','a',['You want to check if maxabs returns the correct value for some input.', 'The function has no side effects\u003B even though it takes a list L as a parameter, it doesn\u0027t alter its contents.'])">Check Me</button>
            <button class='btn btn-default' id="test_questionmore_testing_3_bcomp" disabled name="compare" onclick="compareAnswers('test_questionmore_testing_3');">Compare Me</button>
            </form><br />
            <div id="test_questionmore_testing_3_feedback">
            </div>
            </div>
            
            <div id="test_questionmore_testing_4" class="alert alert-warning">
            interpolation-4: We have usually used the sorted function, which takes a list as input and returns a new list containing the same items, possibly in a different order. There is also a method called sort for lists. It changes the order of the items in the list, and returns the value None. Which kind of test case would you use on the sort method?<form name="test_questionmore_testing_4_form" method="get" action="" onsubmit="return false;">
            <input type="radio" name="group1" value="a" id="test_questionmore_testing_4_opt_a" />
            <label for= "test_questionmore_testing_4_opt_a">  a) return value test</label><br />
            
            <input type="radio" name="group1" value="b" id="test_questionmore_testing_4_opt_b" />
            <label for= "test_questionmore_testing_4_opt_b">  b) side effect test</label><br />
            

            <script>
            $(document).ready(function(){checkRadio('test_questionmore_testing_4');});
            </script>
            <button class='btn btn-success' name="do answer" onclick="checkMCMFStorage('test_questionmore_testing_4','b',['The sort method always returns None, so there\u0027s nothing to check about whether it is returning the right value.', 'You want to check whether it has the correct side effect, whether it correctly mutates the list.'])">Check Me</button>
            <button class='btn btn-default' id="test_questionmore_testing_4_bcomp" disabled name="compare" onclick="compareAnswers('test_questionmore_testing_4');">Compare Me</button>
            </form><br />
            <div id="test_questionmore_testing_4_feedback">
            </div>
            </div>
            </div>
<div class="section" id="glossary">
<h2>Glossary<a class="headerlink" href="#glossary" title="Permalink to this headline">¶</a></h2>
<dl class="glossary docutils">
<dt id="term-return-value-test">return value test</dt>
<dd>A return value test invokes a function on a particular set of inputs and checks whether the return value is the correct one for those inputs.</dd>
<dt id="term-side-effect-test">side effect test</dt>
<dd>A side effect test invokes a function and then checks whether a mutable object has the correct value. These tests are particularly common for methods of classes that set the values of instance variables.</dd>
</dl>
</div>
</div>


</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <span id='numuserspan'></span> readers online now | <span class='loggedinuser'></span> | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013 Paul Resnick, Brad Miller, David Ranum, Created using Runestone Interactive.
    </p>
  </div>
</footer>

<script type="text/javascript" charset="utf-8">
    $(document).ready(addUserToFooter);
    $(document).ready(addNavbarLoginLink);
    $(document).ready(createEditors);
    $(document).ready(getNumUsers);
    $(document).ready(getOnlineUsers);
    $(document).ready(createScratchActivecode());
    $(document).ready(styleUnittestResults());
</script>

<script type="text/javascript">
  // add the video play button overlay image
  $(".video-play-overlay").each(function() {
    $(this).css('background-image', "url(\'../_static/play_overlay_icon.png\')")
    });

  // This function is needed to allow the dropdown search bar to work;
  // The default behaviour is that the dropdown menu closes when something in
  // it (like the search bar) is clicked
  $(function() {
    // Fix input element click problem
    $('.dropdown input, .dropdown label').click(function(e) {
      e.stopPropagation();
      });
  });

  // style codelens buttons (doing it here because PyTutor is a submodule owned by someone else
  $(function() {
    $(".ExecutionVisualizer").each(function() {
      $(this).find("#jmpFirstInstr").addClass('btn btn-default');
      $(this).find("#jmpStepBack").addClass('btn btn-danger');
      $(this).find("#jmpStepFwd").addClass('btn btn-success');
      $(this).find("#jmpLastInstr").addClass('btn btn-default');
      });
  });

</script>


<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32029811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>